set(SUBPROJ_NAME                             {{name}})
set(TESTABLE_TARGET                          {{origin-target-name name}})

set(${SUBPROJ_NAME}_LANG                     {{get-var name "lang"}})
set(${SUBPROJ_NAME}_LANG_STANDARD            {{get-var name "lang_standard"}})
set(${SUBPROJ_NAME}_LANG_EXTENSIONS          {{get-var name "lang_extensions"}})
set(${SUBPROJ_NAME}_LANG_STANDARD_REQUIRED   {{get-var name "lang_standard_required"}})

# ############################################################### #
# Set sources ################################################### #
# ############################################################### #

# Insert here your source files
set(${SUBPROJ_NAME}_HEADERS
    )

set(${SUBPROJ_NAME}_SOURCES
    )

# Check variable
if(NOT ${${SUBPROJ_NAME}_HEADERS} OR
   NOT ${${SUBPROJ_NAME}_SOURCES})
    message(
        FATAL_ERROR
        "[target:${SUBPROJ_NAME}]:"
        "\${\${SUBPROJ_NAME}_HEADERS} or \${\${SUBPROJ_NAME}_SOURCES} are empty."
        "\nInit them and insert source files. For example:"
        "\nset(\${SUBPROJ_NAME}_HEADERS \"class.hpp\" \"funcs.hpp\" ....)"
        "\nset(\${SUBPROJ_NAME}_SOURCES \"main.cpp\"  \"class.cpp\" ....)")
endif()

set(
    ${SUBPROJ_NAME}_ALL_SRCS
    ${${SUBPROJ_NAME}_HEADERS}
    ${${SUBPROJ_NAME}_SOURCES})

# ############################################################### #
# Options ####################################################### #
# ############################################################### #

# Insert here your custom options for build:
# For example:
### set(${SUBPROJ_NAME}_INSTALL_CMAKE_PREFIX
###     "lib/cmake/${SUBPROJ_NAME}"
###     CACHE PATH "Installation directory for CMake files")
# .............................................

# ############################################################### #
# Create target for build ####################################### #
# ############################################################### #

add_executable(
    ${SUBPROJ_NAME}
    ${${SUBPROJ_NAME}_ALL_SRCS})

# Enable C++17 on this project
set_target_properties(
    ${SUBPROJ_NAME} PROPERTIES
    ${${SUBPROJ_NAME}_LANG}_STANDARD          ${${SUBPROJ_NAME}_LANG_STANDARD}
    ${${SUBPROJ_NAME}_LANG}_EXTENSIONS        ${${SUBPROJ_NAME}_LANG_EXTENSIONS}
    ${${SUBPROJ_NAME}_LANG}_STANDARD_REQUIRED ${${SUBPROJ_NAME}_LANG_STANDARD_REQUIRED})

# Set specific properties
set_target_properties(
    ${SUBPROJ_NAME} PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}/bin"
    ARCHIVE_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}/lib"
    LIBRARY_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}/lib"
    OUTPUT_NAME              "${SUBPROJ_NAME}$<$<CONFIG:Debug>:d>")

# Set include directories for this project and if it will use as installing
target_include_directories(
    ${SUBPROJ_NAME}
    PRIVATE   $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
    INTERFACE $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>)

# ############################################################### #
# Custom target properties ###################################### #
# ############################################################### #

# Insert here your custom target properties:
# .............................................

# ############################################################### #
# Link libraries ################################################ #
# ############################################################### #

# Insert here custom dependencies:
# For example:
### find_package(GTest CONFIG REQUIRED)
### target_link_libraries(
###     ${SUBPROJ_NAME}
###     GTest::gtest
###     GTest::gtest_main)
# .............................................

target_link_libraries(
    ${SUBPROJ_NAME}
    ${TESTABLE_TARGET})

# ############################################################### #
# Create test target ############################################ #
# ############################################################### #

add_test(
    NAME All${TESTABLE_TARGET}Tests
    COMMAND ${SUBPROJ_NAME})